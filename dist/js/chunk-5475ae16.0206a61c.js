(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5475ae16"],{"4e82":function(t,e,n){"use strict";var r=n("23e7"),s=n("1c0b"),i=n("7b0b"),a=n("d039"),u=n("b301"),o=[],c=o.sort,l=a((function(){o.sort(void 0)})),f=a((function(){o.sort(null)})),m=u("sort"),d=l||!f||m;r({target:"Array",proto:!0,forced:d},{sort:function(t){return void 0===t?c.call(i(this)):c.call(i(this),s(t))}})},6135:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"py-5"},[n("h1",[t._v("管理員頁面")]),n("a",{attrs:{href:"/chatroom"}},[t._v("前往聊天室")]),t.isShow?n("div",[n("AdminUsersTable",{attrs:{initUsers:t.initUsers},on:{"after-submit-IsAdmin":t.afterSubmitIsAdmin,"after-submit-delete":t.afterSubmitDelete}})],1):t._e()])},s=[],i=(n("4e82"),n("96cf"),n("1da1")),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-table-simple",{attrs:{hover:"",small:"","caption-top":"",responsive:""}},[n("b-thead",{attrs:{"head-variant":"dark"}},[n("b-th",{attrs:{colspan:"1"}},[t._v("#")]),n("b-th",{attrs:{colspan:"1"}},[t._v("Email")]),n("b-th",{attrs:{colspan:"1"}},[t._v("Role")]),n("b-th",{attrs:{colspan:"2"}},[t._v("#")])],1),n("b-tbody",t._l(this.initUsers,(function(e){return n("b-tr",{key:e.id},[n("b-td",{staticClass:"text-center"},[t._v(t._s(e.id))]),n("b-td",{staticClass:"text-center"},[t._v(t._s(e.email))]),n("b-td",{staticClass:"text-center"},[t._v(t._s(t._f("isAdmin")(e.isAdmin)))]),n("b-td",{staticClass:"text-center"},[n("b-button-group",[n("b-button",{attrs:{type:"button",size:"sm",variant:"warning"},on:{click:function(n){return n.stopPropagation(),n.preventDefault(),t.submitAuthority(e.id,e.isAdmin)}}},[t._v(" "+t._s(t._f("setAuthority")(e.isAdmin))+" ")]),n("b-button",{attrs:{type:"button",size:"sm",variant:"danger"},on:{click:function(n){return n.stopPropagation(),n.preventDefault(),t.submitDelete(e.id)}}},[t._v("Delete")])],1)],1)],1)})),1)],1)],1)},u=[],o={props:{initUsers:{type:Array}},filters:{isAdmin:function(t){return t?"Admin":"User"},setAuthority:function(t){return t?"Set as User":"Set as Admin"}},data:function(){return{form:{isAdmin:"false"}}},methods:{submitAuthority:function(t,e){confirm("Confirm to Change user's status"),this.form.isAdmin=e?null:"true";var n=JSON.stringify(this.form);this.$emit("after-submit-IsAdmin",t,n)},submitDelete:function(t){confirm("Confirm to delete user"),this.$emit("after-submit-delete",t)}},watch:{initUsers:function(t){this.initUsers=t}}},c=o,l=n("2877"),f=Object(l["a"])(c,a,u,!1,null,null,null),m=f.exports,d=n("365c"),h=new d["a"],b={components:{AdminUsersTable:m},data:function(){return{initUsers:[],isShow:!1}},created:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.getUsers();case 3:e=t.sent,this.initUsers=e.users.sort((function(t,e){return e.id-t.id})),this.isShow=!0,t.next=11;break;case 8:throw t.prev=8,t.t0=t["catch"](0),new Error(t.t0.message);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),methods:{afterSubmitIsAdmin:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,n){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h.putAdminUser(e,n);case 2:if(r=t.sent,"success"!==r.status){t.next=9;break}return t.next=6,h.getUsers();case 6:s=t.sent,this.initUsers=s.users.sort((function(t,e){return e.id-t.id})),this.isShow=!0;case 9:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}(),afterSubmitDelete:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h.deleteUser(e);case 2:if(n=t.sent,"success"!==n.status){t.next=9;break}return t.next=6,h.getUsers();case 6:r=t.sent,this.initUsers=r.users.sort((function(t,e){return e.id-t.id})),this.isShow=!0;case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},p=b,v=Object(l["a"])(p,r,s,!1,null,null,null);e["default"]=v.exports},b301:function(t,e,n){"use strict";var r=n("d039");t.exports=function(t,e){var n=[][t];return!n||!r((function(){n.call(null,e||function(){throw 1},1)}))}}}]);
//# sourceMappingURL=chunk-5475ae16.0206a61c.js.map